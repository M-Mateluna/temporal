<?php
<p>Este contenido se abrió con <code>ShowInfoWidget</code>. Desde aquí podemos abrir otro lightbox dentro de este (anidado) usando <code>ShowInfoDentro</code>.</p>


<div style="display:flex;gap:0.75rem;">
<button type="button" onclick="showIframeHijo()" style="height:32px;padding:0 14px;">Elegir Banco (Lightbox dentro)</button>
<button type="button" onclick="showMsgLocal()" style="height:32px;padding:0 14px;">Probar MessageBox (Hijo)</button>
<button type="button" onclick="showCalendarioLB()" style="height:32px;padding:0 14px;">Calendario (Lightbox)</button>
</div>
</div>


<?php require_once($POSICION."formFoot.php"); ?>


<!-- Importaciones requeridas del hijo -->
<script type="text/javascript" src="<?=$POSICION;?>componente/mascara/lightbox-iframe.js?v=<?=rand();?>"></script>
<script type="text/javascript" src="<?=$POSICION;?>componente/mascara/iu.js?v=<?=rand();?>"></script>
<script type="text/javascript" src="<?=$POSICION;?>componente/messagebox/class.php?v=1"></script>


<script>
// Cada documento que usa Lightbox debe tener su propio IU
var Ajuste = {
ventana: typeof IU,
initialize: function(){ this.ventana = new IU(); },
abrirHijo: function(){
// Abre un lightbox dentro del actual
this.ventana.ShowInfoDentro('bancos.php', '290px', '585px', 'Ajuste.ventana.HideInfo');
}
};
Ajuste.initialize();


$1
// Abre un lightbox con el componente Calendario adentro
function showCalendarioLB(){
addLightboxMarkup();
Ajuste.ventana.ShowInfoDentro('calendario_lightbox.php', '340px', '620px', 'Ajuste.ventana.HideInfo');
}
// MessageBox de ejemplo local (en hijo)
var MSGBOX = {
ventana: typeof IU_MSGBOX,
initialize: function(){ this.ventana = new IU_MSGBOX(); },
Abrir: function(conf){
this.ventana.titulo = conf.titulo || 'Aviso';
this.ventana.texto = '<center>' + (conf.texto || '') + '</center>';
this.ventana.botonera = conf.botonera || 1; // Aceptar
this.ventana.fnretorno = conf.fnretorno || 'MSGBOX.fnretorno';
this.ventana.url = '<?=$POSICION?>';
this.ventana.Messagebox();
},
fnretorno: function(resp){ /* opcional */ }
};
MSGBOX.initialize();


function showMsgLocal(){
MSGBOX.Abrir({
titulo: 'Información',
texto: 'Hola desde el lightbox hijo',
botonera: 1,
fnretorno: 'cerrarMsgLocal'
});
}


function cerrarMsgLocal(resp){
// Cierra el MessageBox al presionar Aceptar (resp === 'A')
MSGBOX.ventana.HideInfo();
}
</script>
