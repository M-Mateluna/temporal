<?php
// Resolver POSICION al root
while (!file_exists($POSICION."conexion.php")) { $POSICION .= "../"; }
require($POSICION."formHeader.php");
?>
<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
  <title>MyIFrame — Parte 1: Buscador ClienteProveedor2</title>

  <link rel="stylesheet" type="text/css" href="<?=$POSICION?>css/nuevoestilo.css?v=1.8">

  <style>
    .contenedor{ max-width: 700px; margin:auto; background:#f1f1f1; }
    .fila{ padding:10px 12px; }
    .inline{ display:inline-flex; align-items:center; gap:6px; }
    .btn{ height:26px; padding:0 10px; border-radius:6px; border:1px solid #6c757d; background:#e9ecef; cursor:pointer; }
  </style>
</head>
<body>

<div class="FORMULARIONECSS contenedor">
  <!-- BÚSQUEDA -->
  <fieldset>
    <legend class="legends">Búsqueda</legend>
    <div class="fila">
      <label for="rut">RUT</label>
      <div class="inline">
        <input type="text" id="rut" placeholder="12.345.678-9" maxlength="20" style="width:320px;">
        <!-- aquí se dibuja la LUPA del componente -->
        <div id="divBuscador" style="display:inline"></div>
        <!-- botón limpiar (aparte del componente) -->
        <button type="button" id="btnLimpiar" class="btn">Limpiar</button>
      </div>
      <!-- por si necesitas el id del cliente/proveedor -->
      <input type="hidden" id="idclienteproveedor">
    </div>
  </fieldset>

  <!-- FRAME CLIENTE/PROVEEDOR (lo agregamos ya para el siguiente paso) -->
  <fieldset>
    <legend class="legends">Cliente / Proveedor</legend>
    <div id="hostFrames"></div>
  </fieldset>
</div>

<!-- Dependencias DESIS -->
<script src="<?=$POSICION?>js/general.js"></script> <!-- MyIFrame -->
<script src="<?=$POSICION?>componente/database/class.php"></script>
<script src="<?=$POSICION?>js/util.js"></script>
<script src="<?=$POSICION?>componente/buscadores/clienteproveedor2/class.js"></script>

<!-- Lightbox para el buscador -->
<script src="<?=$POSICION?>componente/mascara/lightbox-iframe.js"></script>
<script src="<?=$POSICION?>componente/mascara/iu.js"></script>

<!-- Controlador del buscador -->
<script src="controlador.js"></script>

<!-- Creación del MyIFrame que carga clienteproveedor.php (misma carpeta) -->
<script>
  (function(){
    var imgdir = '<?=$POSICION."img/".$CSS_STYLE."/rows/";?>';
    var url_cp = "clienteproveedor.php"; // misma carpeta que este index

    window.frame_cp = new MyIFrame('frame_cp','CLIENTE / PROVEEDOR','', imgdir);
    frame_cp.height = 180;   // ajusta al gusto
    frame_cp.src    = url_cp;
    frame_cp.show(true);

    document.getElementById('hostFrames')
            .appendChild(document.getElementById('frame_cp'));
  })();
</script>

<?php require($POSICION."formFoot.php"); ?>
</body>
</html>
