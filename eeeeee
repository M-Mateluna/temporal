// Crear estructura base de Lightbox al cargar la página
addLightboxMarkup();


// Objeto para gestionar Lightbox principal + anidados
var Ajuste = {
ventana: typeof IU,
initialize: function () {
this.ventana = new IU();
},
abrirLightboxPrincipal: function () {
// Abre contenido.php en un lightbox con callback al cerrar
this.ventana.ShowInfoWidget("contenido.php", 700, 900, 'OcultarVentana');
}
};
$1


// Abre lightbox "Termino Contrato" que contiene el componente Calendario con límites +/- 1 mes
Ajuste.abrirTerminoContrato = function(){
this.ventana.ShowInfoWidget('termino_contrato.php', 360, 620, 'OcultarVentana');
};


// Callback estándar para cerrar
function OcultarVentana() {
Ajuste.ventana.HideInfo();
}


// Implementación de MessageBox (patrón escalable)
var MSGBOX = {
ventana: typeof IU_MSGBOX,
initialize: function(){ this.ventana = new IU_MSGBOX(); },
Abrir: function(conf){
this.ventana.titulo = conf.titulo || 'Aviso';
this.ventana.texto = '<center>' + (conf.texto || '') + '</center>';
this.ventana.botonera = conf.botonera || 3; // por defecto Sí/No
this.ventana.conCerrar = (conf.conCerrar !== undefined) ? conf.conCerrar : this.ventana.conCerrar;
this.ventana.fnretorno = conf.fnretorno || 'MSGBOX.fnretorno';
this.ventana.objeto = conf.objeto || {};
this.ventana.url = window.POSICION;
this.ventana.Messagebox();
},
fnretorno: function(resp){ /* opcional */ }
};
MSGBOX.initialize();


// Acciones de la vista principal
var acciones = {
confirmarFiltros: function(){
var desde = document.getElementById('fechadesde') ? document.getElementById('fechadesde').value : '';
var hasta = document.getElementById('fechahasta') ? document.getElementById('fechahasta').value : '';


// Mensaje de confirmación
MSGBOX.Abrir({
titulo: 'Confirmación',
texto: '¿Aplicar el rango de fechas seleccionado?<br><small>Desde: ' + (desde||'-') + ' / Hasta: ' + (hasta||'-') + '</small>',
botonera: 3, // Sí / No
fnretorno: 'acciones._confirmarFiltrosRetorno',
conCerrar: false,
objeto: { desde: desde, hasta: hasta }
});
},
_confirmarFiltrosRetorno: function(resp){
if (resp === 'S') {
// Aquí iría la lógica real (AJAX/DB). Para demo, solo cierre.
// Ej.: ajax('aplicarFiltros', 'desde=...&hasta=...', onOk, onErr)
}
MSGBOX.ventana.HideInfo();
}
};
