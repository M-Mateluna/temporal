<?php
// Resolver ruta base
while (!file_exists($POSICION."conexion.php")) { $POSICION .= "../"; }
require($POSICION."formHeader.php");
?>
<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
  <title>Cliente / Proveedor (Frame)</title>
  <link rel="stylesheet" href="<?=$POSICION?>css/nuevoestilo.css?v=1.8">
  <style>
    .wrap{padding:10px;}
    .row{display:grid;grid-template-columns:1fr 1fr auto;gap:12px;align-items:end;margin-bottom:8px;}
    .row2{display:grid;grid-template-columns:1fr 1fr;gap:12px;}
    .stack label{display:block;margin-bottom:4px;}
    .btn{height:26px;border-radius:6px;border:1px solid #6c757d;background:#e9ecef;padding:0 12px;cursor:pointer;}
    input[type="text"], input[type="datetime-local"]{width:100%;}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="row">
      <div class="stack">
        <label for="razonsocial">Raz√≥n Social</label>
        <input type="text" id="razonsocial" maxlength="120">
      </div>
      <div class="stack">
        <label for="giro">Giro</label>
        <input type="text" id="giro" maxlength="120">
      </div>
      <div style="text-align:right;">
        <button type="button" id="btnGuardar" class="btn">Guardar</button>
      </div>
    </div>

    <div class="row2">
      <div class="stack">
        <label for="idusuario">ID Usuario</label>
        <input type="text" id="idusuario" maxlength="10">
      </div>
      <div class="stack">
        <label for="fechahora">Fecha/Hora</label>
        <input type="datetime-local" id="fechahora">
      </div>
    </div>
  </div>

  <script>
    // (opcional) dispara un evento al padre cuando se presiona Guardar
    document.getElementById('btnGuardar').addEventListener('click', function(){
      const data = {
        razonsocial: document.getElementById('razonsocial').value,
        giro:        document.getElementById('giro').value,
        idusuario:   document.getElementById('idusuario').value,
        fechahora:   document.getElementById('fechahora').value
      };
      if (window.parent && window.parent !== window) {
        try { window.parent.postMessage({type:'cp_guardar', payload:data}, '*'); } catch(e){}
      }
    });
  </script>
</body>
</html>
