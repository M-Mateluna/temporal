<?php
// Resuelve la raíz para que las rutas funcionen desde cualquier carpeta
$POSICION = "";
while (!file_exists($POSICION."conexion.php")) { $POSICION .= "../"; }

// (opcional) Título usado por plantillas del sistema
$titulo_formulario = "ClienteProveedor2";
?>
<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
  <title>Gestión de Clientes / Proveedores</title>

  <!-- Nuevo estilo del sistema -->
  <link type="text/css" rel="stylesheet" href="<?=$POSICION?>css/nuevoestilo.css?v=1.8">

  <style type="text/css">
    /* Mismos estilos del ejercicio Nuevoestiloscss */
    .contenedor { max-width: 600px; margin: auto; text-align: -webkit-center; background: #f1f1f1; }
    .contenedor label { display: block; text-align: left; margin-bottom: 6px; }
    .contenedor td { padding: 6px 15px; margin-bottom: 6px; }
    .buscador-inline { display: inline-flex; align-items: center; gap: 6px; }
  </style>
</head>
<body>

  <div class="FORMULARIONECSS contenedor">
    <form id="frmCP" method="post" autocomplete="off" onsubmit="return false;">
      <fieldset>
        <legend class="legends">Información del Registro</legend>

        <table class="grid" cellspacing="0" cellpadding="0">
          <tr class="fila">
            <td>
              <table width="100%" cellspacing="0" cellpadding="0">
                <tr>
                  <td class="stack">
                    <label for="rut">RUT</label>
                    <div class="buscador-inline">
                      <input type="text" name="rut" id="rut" maxlength="20" placeholder="12.345.678-9">
                      <!-- Aquí se dibujan Lupa / Crear / Borrar -->
                      <div id="divBuscador" style="display:inline"></div>
                    </div>
                    <!-- id interno de Cliente/Proveedor -->
                    <input type="hidden" id="idclienteproveedor" name="idclienteproveedor">
                  </td>
                </tr>
              </table>
            </td>

            <td>
              <table width="100%" cellspacing="0" cellpadding="0">
                <tr>
                  <td class="stack">
                    <label for="giro">Giro</label>
                    <input type="text" name="giro" id="giro" maxlength="120">
                  </td>
                </tr>
              </table>
            </td>
          </tr>

          <tr class="fila">
            <td>
              <table width="100%" cellspacing="0" cellpadding="0">
                <tr>
                  <td class="stack">
                    <label for="idusuario">ID Usuario</label>
                    <input type="text" name="idusuario" id="idusuario" maxlength="10">
                  </td>
                </tr>
              </table>
            </td>

            <td>
              <table width="100%" cellspacing="0" cellpadding="0">
                <tr>
                  <td class="stack">
                    <label for="fechahora">Fecha/Hora</label>
                    <input type="datetime-local" name="fechahora" id="fechahora">
                  </td>
                </tr>
              </table>
            </td>
          </tr>
        </table>
      </fieldset>
    </form>
  </div>

  <!-- ====== Importaciones (mismo patrón que la wiki) ====== -->
  <script type="text/javascript" src="<?=$POSICION?>componente/database/class.php"></script>
  <script type="text/javascript" src="<?=$POSICION?>js/util.js"></script>
  <script type="text/javascript" src="<?=$POSICION?>componente/buscadores/clienteproveedor2/class.js"></script>

  <!-- Lightbox -->
  <script type="text/javascript" src="<?=$POSICION?>componente/mascara/lightbox-iframe.js"></script>
  <script type="text/javascript" src="<?=$POSICION?>componente/mascara/iu.js"></script>

  <!-- MessageBox (y polyfill mínimo por compatibilidad) -->
  <script>
    if (typeof Class === "undefined") {
      var Class = { create: function(){ return function(){ this.initialize && this.initialize.apply(this, arguments); }; } };
    }
  </script>
  <script type="text/javascript" src="<?=$POSICION?>componente/messagebox/class.php?v=1"></script>

  <!-- Controlador del ejercicio -->
  <script type="text/javascript" src="controlador.js?v=<?=rand()?>"></script>
</body>
</html>
